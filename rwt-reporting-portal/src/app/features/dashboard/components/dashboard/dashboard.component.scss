@use '@carbon/styles/scss/spacing';

.dashboard-container {
  min-height: 100vh;
  background: var(--color-bg-secondary);
  transition: background-color 0.3s ease;
}

// Welcome Banner - Hero section with background image
.welcome-banner {
  position: relative;
  min-height: 280px; // Reduced from 360px
  display: flex;
  align-items: flex-end;
  background-image: url('/images/hub-enterprise-bg.jpg'); // TODO: Replace with dashboard-hero-bg.jpg
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  overflow: hidden;

  @media (max-width: 768px) {
    min-height: 240px; // Reduced from 280px
  }

  @media (max-width: 480px) {
    min-height: 200px; // Reduced from 240px
  }
}

// Dark overlay for text readability
.banner-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.7) 100%);
  z-index: 1;
}

.welcome-content {
  position: relative;
  z-index: 2;
  max-width: 1280px;
  width: 100%;
  margin: 0 auto;
  padding: spacing.$spacing-07 spacing.$spacing-06;

  @media (max-width: 768px) {
    padding: spacing.$spacing-06 spacing.$spacing-05;
  }
}

.welcome-title {
  font-size: 2.5rem; // 40px
  font-weight: 300;
  line-height: 1.2;
  margin: 0 0 spacing.$spacing-04 0;
  color: #ffffff;
  letter-spacing: -0.02em;

  @media (max-width: 768px) {
    font-size: 2rem; // 32px
  }

  @media (max-width: 480px) {
    font-size: 1.5rem; // 24px
  }
}

.welcome-description {
  font-size: 1.125rem; // 18px
  line-height: 1.5;
  margin: 0;
  color: rgba(255, 255, 255, 0.95);
  max-width: 700px;

  @media (max-width: 768px) {
    font-size: 1rem; // 16px
  }

  @media (max-width: 480px) {
    font-size: 0.875rem; // 14px
  }
}

// Quick Stats Row
.quick-stats {
  display: flex;
  gap: spacing.$spacing-07;
  margin-top: spacing.$spacing-06;

  @media (max-width: 640px) {
    gap: spacing.$spacing-05;
  }

  @media (max-width: 480px) {
    flex-wrap: wrap;
    gap: spacing.$spacing-04;
  }
}

.stat-item {
  display: flex;
  flex-direction: column;
  gap: spacing.$spacing-02;
}

.stat-value {
  font-size: 1.75rem;
  font-weight: 300;
  color: #ffffff;
  line-height: 1;

  @media (max-width: 768px) {
    font-size: 1.5rem;
  }
}

.stat-label {
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.8);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.dashboard-main {
  padding: spacing.$spacing-05 0; // Reduced from spacing-06 (24px) to spacing-05 (16px)
}

.dashboard-content {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 spacing.$spacing-06;

  @media (max-width: 768px) {
    padding: 0 spacing.$spacing-05;
  }
}

// Page Title - "Reporting Hub"
.page-title {
  font-size: 1.25rem; // 20px - refined from 28px
  font-weight: 400;
  line-height: 1.4;
  letter-spacing: 0.01em;
  margin: 0 0 spacing.$spacing-05 0;
  color: var(--color-text-primary);

  @media (max-width: 768px) {
    font-size: 1.125rem; // 18px
  }
}

// Feature Cards Grid - Compact layout
.feature-cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); // Reduced from 256px to 200px
  gap: spacing.$spacing-04; // Reduced from spacing-05 (16px) to spacing-04 (12px)

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: spacing.$spacing-04; // 12px - tighter on mobile
  }
}

// Feature Card - Horizontal layout with color theme
.feature-card {
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: 320px; // Match approximate total height of update cards
  text-decoration: none;
  overflow: hidden;
  border: 1px solid var(--color-border-light);
  background: linear-gradient(135deg, #393939 0%, #262626 100%);
  transition: border-color 200ms cubic-bezier(0.2, 0, 0.38, 0.9);

  &:hover {
    border-color: var(--color-border-medium);
  }

  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  // Color theme variants
  &--default {
    background: linear-gradient(135deg, #393939 0%, #262626 100%);
  }

  &--blue {
    background: linear-gradient(135deg, #0f62fe 0%, #002d9c 100%);
  }

  &--green {
    background: linear-gradient(135deg, #198038 0%, #0e6027 100%);
  }

  &--purple {
    background: linear-gradient(135deg, #8a3ffc 0%, #6929c4 100%);
  }

  &--teal {
    background: linear-gradient(135deg, #009d9a 0%, #007d79 100%);
  }

  &--magenta {
    background: linear-gradient(135deg, #d12771 0%, #9f1853 100%);
  }

  &--cyan {
    background: linear-gradient(135deg, #1192e8 0%, #0072c3 100%);
  }

  &--red {
    background: linear-gradient(135deg, #da1e28 0%, #a2191f 100%);
  }

  // Brand-specific color themes
  &--sequoia {
    background: linear-gradient(135deg, #2d5a27 0%, #1a3d16 100%);
  }

  &--corevest {
    background: linear-gradient(135deg, #1a4d8c 0%, #0d2b4d 100%);
  }

  &--enterprise {
    background: linear-gradient(135deg, #4a4a4a 0%, #2d2d2d 100%);
  }

  &--aspire {
    background: linear-gradient(135deg, #d45500 0%, #8a3700 100%);
  }
}

// Dark Overlay - Covers the background image
.card-overlay {
  position: absolute;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.6);
  transition: background-color 300ms cubic-bezier(0.2, 0, 0.38, 0.9);
  z-index: 1;

  .feature-card:hover & {
    background-color: rgba(0, 0, 0, 0.4);
  }
}

// Feature Card Header - Title and Arrow
.feature-card-header {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: spacing.$spacing-05;
  margin-bottom: auto;
}

// Feature Card Title (Always visible)
.feature-card-title {
  font-size: 1.25rem; // 20px
  font-weight: 400;
  margin: 0;
  line-height: 1.4;
  letter-spacing: 0;
  color: #ffffff;
}

// Arrow icon (Always visible)
.feature-card-arrow {
  flex-shrink: 0;
  color: #ffffff;
  transition: transform 300ms cubic-bezier(0.2, 0, 0.38, 0.9);

  .feature-card:hover & {
    transform: translateX(4px);
  }
}

// Feature Card Details (Hidden by default, revealed on hover)
.feature-card-details {
  position: relative;
  z-index: 2;
  padding: 0 spacing.$spacing-05 spacing.$spacing-05;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 300ms cubic-bezier(0.2, 0, 0.38, 0.9),
              transform 300ms cubic-bezier(0.2, 0, 0.38, 0.9);

  .feature-card:hover & {
    opacity: 1;
    transform: translateY(0);
  }
}

// Feature Card Description
.feature-card-description {
  font-size: 0.875rem; // 14px
  line-height: 1.43;
  margin: 0 0 spacing.$spacing-05 0;
  color: rgba(255, 255, 255, 0.95);
}

// Feature Card Footer
.feature-card-footer {
  display: flex;
  align-items: center;
  gap: spacing.$spacing-04;
  font-size: 0.875rem; // 14px
  color: rgba(255, 255, 255, 0.95);
}

.feature-card-count {
  font-weight: 600;
}

.feature-card-link {
  margin-left: auto;
  font-weight: 400;
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  .feature-card,
  .card-overlay,
  .feature-card-arrow,
  .feature-card-details {
    transition: none;
  }
}

// No Hubs State
.no-hubs {
  text-align: center;
  padding: spacing.$spacing-10 spacing.$spacing-06;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-light);
  border-radius: 4px;

  .icon-large {
    width: spacing.$spacing-10;
    height: spacing.$spacing-10;
    color: var(--color-border-medium);
    margin: 0 auto spacing.$spacing-05;
  }

  h3 {
    font-size: 1.125rem; // 18px
    font-weight: 600;
    color: var(--color-text-secondary);
    margin: 0 0 spacing.$spacing-03 0;
  }

  p {
    color: var(--color-text-tertiary);
    margin: 0;
    font-size: 0.875rem; // 14px
  }
}

// Latest Updates Section
.updates-section {
  padding: spacing.$spacing-07 0 spacing.$spacing-09 0;
  background: var(--color-bg-secondary);
  border-top: 1px solid var(--color-border-light);

  @media (max-width: 768px) {
    padding: spacing.$spacing-06 0 spacing.$spacing-07 0;
  }
}

.updates-content {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 spacing.$spacing-06;

  @media (max-width: 768px) {
    padding: 0 spacing.$spacing-05;
  }
}

// Section Header with "View All" link
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: spacing.$spacing-05;

  @media (max-width: 640px) {
    flex-direction: column;
    align-items: flex-start;
    gap: spacing.$spacing-03;
  }
}

.section-title {
  font-size: 1.25rem; // 20px - refined from 28px
  font-weight: 400;
  line-height: 1.4;
  letter-spacing: 0.01em;
  margin: 0;
  color: var(--color-text-primary);

  @media (max-width: 768px) {
    font-size: 1.125rem; // 18px
  }
}

// View All Updates Link - Compact text link
.view-all-link {
  display: inline-flex;
  align-items: center;
  gap: spacing.$spacing-02;
  font-size: 0.875rem;
  font-weight: 400;
  color: var(--color-primary);
  text-decoration: none;

  .arrow-icon {
    width: 16px;
    height: 16px;
  }

  &:hover {
    text-decoration: underline;
  }

  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

// Featured + Grid Layout Container
.updates-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: spacing.$spacing-05;

  @media (max-width: 968px) {
    grid-template-columns: 1fr;
  }
}

// Featured Article Card (Left side - large)
.featured-card {
  position: relative;
  display: flex;
  flex-direction: column;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-light);
  cursor: pointer;
  overflow: hidden;

  &:hover {
    border-color: var(--color-border-medium);

    .featured-hover-indicator {
      opacity: 1;
    }
  }

  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

.featured-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: var(--color-bg-tertiary);

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  @media (max-width: 640px) {
    height: 160px;
  }
}

.featured-body {
  padding: spacing.$spacing-05;
  display: flex;
  flex-direction: column;
  gap: spacing.$spacing-03;
  flex: 1;
}

.featured-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 500;
  color: var(--color-text-primary);
  line-height: 1.4;

  @media (max-width: 640px) {
    font-size: 1.125rem;
  }
}

.featured-meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: spacing.$spacing-02;
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  margin-top: auto;
}

.featured-hover-indicator {
  position: absolute;
  bottom: spacing.$spacing-05;
  right: spacing.$spacing-05;
  opacity: 0;
  color: var(--color-primary);
}

// Category Tag
.category-tag {
  display: inline-block;
  font-size: 0.6875rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-primary);
  background: transparent;

  &--small {
    font-size: 0.625rem;
  }
}

// Meta text styles
.meta-author,
.meta-date,
.meta-read-time {
  white-space: nowrap;
}

.meta-separator {
  color: var(--color-text-tertiary);
}

// Updates Grid (Right side - stacked list)
.updates-grid {
  display: flex;
  flex-direction: column;
  gap: 0;
}

// Article Card (Compact list item style)
.article-card {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: spacing.$spacing-04;
  padding: spacing.$spacing-05;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-light);
  border-bottom: none;
  cursor: pointer;

  &:last-child {
    border-bottom: 1px solid var(--color-border-light);
  }

  &:hover {
    background: var(--color-bg-tertiary);

    .card-arrow {
      opacity: 1;
    }
  }

  &:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: -2px;
  }
}

.card-content {
  display: flex;
  flex-direction: column;
  gap: spacing.$spacing-02;
  flex: 1;
  min-width: 0;
}

.card-title {
  margin: 0;
  font-size: 0.9375rem;
  font-weight: 500;
  color: var(--color-text-primary);
  line-height: 1.4;
}

.card-meta-row {
  display: flex;
  align-items: center;
  gap: spacing.$spacing-02;
  font-size: 0.75rem;
  color: var(--color-text-secondary);
}

.card-arrow {
  flex-shrink: 0;
  opacity: 0;
  color: var(--color-primary);
  align-self: center;
}

// Responsive Design
@media (max-width: 768px) {
  .dashboard-main {
    padding: spacing.$spacing-08 0;
  }

  .hub-card {
    min-height: 180px;
  }

  .hub-card-body {
    padding: spacing.$spacing-05;

    .hub-title {
      font-size: 1rem;
    }
  }

  .hub-card-footer {
    padding: spacing.$spacing-04 spacing.$spacing-05;
  }
}

// ========================================
// SKELETON LOADING STYLES
// ========================================

// Base skeleton animation
@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.1) 25%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
  border-radius: 2px;
}

// Welcome banner skeleton
.skeleton-title {
  height: 2.5rem;
  width: 300px;
  max-width: 80%;
  margin-bottom: spacing.$spacing-04;
}

.skeleton-description {
  height: 1.125rem;
  width: 500px;
  max-width: 90%;
}

// Hub card skeleton
.feature-card--skeleton {
  background-color: #262626;

  .card-overlay {
    background-color: rgba(0, 0, 0, 0.4);
  }
}

.feature-card-details--skeleton {
  opacity: 1;
  transform: translateY(0);
}

.skeleton-card-title {
  height: 1.25rem;
  width: 120px;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.1) 25%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-card-description {
  height: 0.875rem;
  width: 100%;
  margin-bottom: spacing.$spacing-02;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.1) 25%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;

  &--short {
    width: 60%;
    margin-bottom: spacing.$spacing-05;
  }
}

.skeleton-card-count {
  height: 0.875rem;
  width: 80px;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.1) 25%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0.1) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

// Featured card skeleton
.featured-card--skeleton {
  pointer-events: none;

  .featured-image {
    background: var(--color-bg-tertiary);
  }
}

// Article card skeleton
.article-card--skeleton {
  pointer-events: none;
}

.skeleton-image {
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    var(--color-bg-tertiary) 25%,
    var(--color-border-light) 50%,
    var(--color-bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-tag {
  height: 0.6875rem;
  width: 70px;
  background: linear-gradient(
    90deg,
    var(--color-bg-tertiary) 25%,
    var(--color-border-light) 50%,
    var(--color-bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-featured-title {
  height: 1.25rem;
  width: 100%;
  background: linear-gradient(
    90deg,
    var(--color-bg-tertiary) 25%,
    var(--color-border-light) 50%,
    var(--color-bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;

  &--short {
    width: 60%;
  }
}

.skeleton-author {
  height: 0.75rem;
  width: 100px;
  background: linear-gradient(
    90deg,
    var(--color-bg-tertiary) 25%,
    var(--color-border-light) 50%,
    var(--color-bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-meta {
  height: 0.75rem;
  width: 140px;
  background: linear-gradient(
    90deg,
    var(--color-bg-tertiary) 25%,
    var(--color-border-light) 50%,
    var(--color-bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-link {
  height: 1rem;
  width: 60px;
  background: linear-gradient(
    90deg,
    var(--color-bg-tertiary) 25%,
    var(--color-border-light) 50%,
    var(--color-bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

// ========================================
// ANNOUNCEMENT DETAIL MODAL
// ========================================

::ng-deep {
  .cds--modal-container {
    background: var(--color-bg-primary);
    max-width: 700px;
    max-height: 85vh;

    .cds--modal-header {
      background: var(--color-bg-primary);
      border-bottom: 1px solid var(--color-border-light);
      padding-bottom: spacing.$spacing-04;
    }

    .cds--modal-content {
      background: var(--color-bg-primary);
      color: var(--color-text-primary);
      padding: spacing.$spacing-05;
      max-height: 60vh;
      overflow-y: auto;
    }

    .cds--modal-close {
      color: var(--color-text-secondary);

      &:hover {
        background: var(--color-bg-tertiary);
      }
    }
  }
}

.modal-category-tag {
  display: inline-block;
  padding: spacing.$spacing-01 spacing.$spacing-03;
  background: var(--color-primary);
  color: white;
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 2px;
  margin-bottom: spacing.$spacing-03;
}

.announcement-modal-meta {
  display: flex;
  align-items: center;
  gap: spacing.$spacing-02;
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-bottom: spacing.$spacing-05;

  .meta-author {
    font-weight: 500;
    color: var(--color-text-primary);
  }
}

.announcement-modal-image {
  width: 100%;
  height: 300px;
  margin-bottom: spacing.$spacing-05;
  border-radius: 4px;
  overflow: hidden;
  background: var(--color-bg-tertiary);

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

.announcement-modal-content {
  font-size: 0.875rem;
  line-height: 1.6;
  color: var(--color-text-primary);

  // Markdown rendered content styling
  h1, h2, h3, h4, h5, h6 {
    margin-top: spacing.$spacing-06;
    margin-bottom: spacing.$spacing-03;
    font-weight: 600;
    color: var(--color-text-primary);
    line-height: 1.3;

    &:first-child {
      margin-top: spacing.$spacing-05;
    }
  }

  h1 { font-size: 0.9375rem; }
  h2 { font-size: 0.875rem; }
  h3 { font-size: 0.8125rem; }
  h4 { font-size: 0.8125rem; }

  p {
    margin: 0 0 spacing.$spacing-04 0;

    &:last-child {
      margin-bottom: 0;
    }
  }

  ul, ol {
    margin: 0 0 spacing.$spacing-04 0;
    padding-left: spacing.$spacing-05;
  }

  li {
    margin-bottom: spacing.$spacing-02;
    padding-left: spacing.$spacing-02;

    &:last-child {
      margin-bottom: 0;
    }
  }

  strong, b {
    font-weight: 600;
  }

  em, i {
    font-style: italic;
  }

  code {
    background: var(--color-bg-tertiary);
    padding: 0.125rem 0.375rem;
    border-radius: 3px;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.8125rem;
  }

  pre {
    background: var(--color-bg-tertiary);
    padding: spacing.$spacing-04;
    border-radius: 4px;
    overflow-x: auto;
    margin: 0 0 spacing.$spacing-04 0;

    code {
      background: transparent;
      padding: 0;
    }
  }

  blockquote {
    border-left: 3px solid var(--color-primary);
    padding-left: spacing.$spacing-04;
    margin: 0 0 spacing.$spacing-04 0;
    color: var(--color-text-secondary);
    font-style: italic;
  }

  a {
    color: var(--color-primary);
    text-decoration: underline;

    &:hover {
      text-decoration: none;
    }
  }

  hr {
    border: none;
    border-top: 1px solid var(--color-border-light);
    margin: spacing.$spacing-04 0;
  }
}

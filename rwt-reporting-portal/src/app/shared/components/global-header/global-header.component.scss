@use '@carbon/styles/scss/spacing';

// ========================================
// HEADER - ALWAYS CARBON GRAY-100 (DARK)
// ========================================

cds-header,
cds-header .cds--header {
  background-color: #161616 !important;
  border-bottom: 1px solid #393939 !important;
}

// ========================================
// HAMBURGER MENU STYLES
// ========================================

cds-hamburger {
  &,
  & *,
  & button,
  & button::before,
  & button::after,
  & .cds--header__menu-trigger,
  & .cds--header__menu-toggle,
  & .cds--header__action,
  & .cds--header__action::before,
  & .cds--header__action::after {
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    border-color: transparent !important;
    outline: none !important;
    box-shadow: none !important;
  }

  svg,
  svg path,
  button svg,
  button svg path {
    fill: #f4f4f4 !important;
  }

  button:hover,
  .cds--header__action:hover {
    background-color: #353535 !important;
  }

  button:focus,
  .cds--header__action:focus {
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
  }

  button:active,
  button.cds--header__action--active,
  .cds--header__action--active {
    background: transparent !important;
    background-color: transparent !important;
  }
}

// Extra override for when [active]="true" is set (sidenav open)
cds-hamburger[ng-reflect-active="true"],
cds-hamburger[ng-reflect-active="true"] button,
cds-hamburger[ng-reflect-active="true"] .cds--header__action {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;

  &::before,
  &::after {
    display: none !important;
    background: transparent !important;
  }

  svg,
  svg path {
    fill: #f4f4f4 !important;
  }
}

// Nuclear option - override any Carbon class that might add white background
.cds--header__action--active,
.cds--header__menu-trigger--open,
[aria-expanded="true"].cds--header__action,
[aria-expanded="true"].cds--header__menu-trigger {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  border-color: transparent !important;
  box-shadow: none !important;

  &::before,
  &::after {
    display: none !important;
  }
}

// ========================================
// HEADER BRAND STYLING
// ========================================

cds-header .cds--header__name--prefix {
  font-weight: 400 !important;
  font-size: 1rem !important;
}

cds-header .cds--header__name {
  font-size: 1rem !important;

  .cds--header__name--prefix ~ span,
  > span:not(.cds--header__name--prefix) {
    font-weight: 600 !important;
  }
}

// ========================================
// NOTIFICATION BELL
// ========================================

.notification-bell {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  padding: 0;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background-color 70ms cubic-bezier(0.2, 0, 0.38, 0.9);

  &:hover {
    background-color: #353535;
  }

  &:focus {
    outline: none;
    background-color: #353535;
  }

  svg {
    fill: #f4f4f4;
  }
}

.notification-badge {
  position: absolute;
  top: 8px;
  right: 6px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  font-size: 0.6875rem;
  font-weight: 600;
  line-height: 18px;
  text-align: center;
  color: #ffffff;
  background-color: #da1e28;
  border-radius: 9px;
  pointer-events: none;
}

// ========================================
// ADMIN BADGE
// ========================================

.admin-badge-wrapper {
  display: flex;
  align-items: center;
  height: 48px;
  padding: 0 spacing.$spacing-04 0 0;
}

.admin-badge {
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #ff832b;
  padding: spacing.$spacing-01 spacing.$spacing-02;
  background: rgba(255, 131, 43, 0.2);
  border: 1px solid rgba(255, 131, 43, 0.3);
  border-radius: 2px;
  user-select: none;
}

// ========================================
// HEADER ACTION - PROFILE TRIGGER
// ========================================

cds-header-action {
  .cds--header__action {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    padding: 0;
    background: transparent !important;
    border: none;
    cursor: pointer;

    &:hover {
      background-color: #353535 !important;
    }

    &:focus {
      outline: none;
      border: none;
      box-shadow: none;
      background: transparent !important;
    }
  }

  // Keep background black/transparent even when active (dropdown open)
  &[ng-reflect-active="true"] .cds--header__action,
  .cds--header__action--active {
    background: transparent !important;
    background-color: transparent !important;
  }

  // Hide only the tooltip/assistive text, not the button content
  .cds--assistive-text {
    display: none !important;
  }
}

// Avatar inside header action
.header-avatar {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  color: #ffffff;
  user-select: none;

  .avatar-icon {
    fill: #ffffff;
  }

  .avatar-initials {
    font-size: 0.75rem;
    font-weight: 600;
    color: #ffffff;
    line-height: 1;
  }
}

// ========================================
// PROFILE DROPDOWN - CARBON POPOVER STYLE
// ========================================

.profile-dropdown {
  position: fixed;
  top: 48px;
  right: 0;
  width: 320px;
  background-color: #161616; // Carbon gray-100 - matches header
  border-left: 1px solid #393939;
  border-bottom: 1px solid #393939;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
  z-index: 9000;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-8px);
  transition: opacity 110ms cubic-bezier(0.2, 0, 0.38, 0.9),
              transform 110ms cubic-bezier(0.2, 0, 0.38, 0.9),
              visibility 110ms;

  &--open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }
}

// User info header section
.profile-dropdown__header {
  display: flex;
  align-items: center;
  gap: spacing.$spacing-04;
  padding: spacing.$spacing-05;
}

.profile-dropdown__avatar {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background-color: #4589ff; // Default blue if no color set
}

.profile-dropdown__avatar-icon {
  fill: #ffffff;
}

.profile-dropdown__avatar-initials {
  font-size: 1.5rem;
  font-weight: 600;
  color: #ffffff;
  line-height: 1;
}

.profile-dropdown__user-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: spacing.$spacing-01;
}

.profile-dropdown__name {
  font-size: 0.875rem;
  font-weight: 600;
  color: #f4f4f4;
  line-height: 1.29;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-dropdown__email {
  font-size: 0.75rem;
  font-weight: 400;
  color: #c6c6c6; // Carbon gray-30
  line-height: 1.34;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

// Divider
.profile-dropdown__divider {
  height: 1px;
  background-color: #393939; // Carbon gray-80 - always dark
  margin: 0;
}

// Info row (label + value)
.profile-dropdown__info-row {
  display: flex;
  flex-direction: column;
  gap: spacing.$spacing-01;
  padding: spacing.$spacing-04 spacing.$spacing-05;
}

.profile-dropdown__info-label {
  font-size: 0.75rem;
  font-weight: 400;
  color: #a8a8a8; // Carbon gray-40 - muted label
  line-height: 1.34;
}

.profile-dropdown__info-value {
  font-size: 0.875rem;
  font-weight: 400;
  color: #f4f4f4;
  line-height: 1.29;
}

// Menu items - always dark theme (matches header)
.profile-dropdown__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: spacing.$spacing-04 spacing.$spacing-05;
  margin: 0;
  background: transparent;
  border: none;
  cursor: pointer;
  text-align: left;
  font-size: 0.875rem;
  font-weight: 400;
  color: #f4f4f4; // Always light text
  line-height: 1.29;
  transition: background-color 70ms cubic-bezier(0.2, 0, 0.38, 0.9);

  &:hover {
    background-color: #353535; // Subtle hover
  }

  &:focus {
    outline: none;
    background-color: #353535;
  }

  &:active {
    background-color: #393939;
  }

  svg {
    flex-shrink: 0;
    fill: #f4f4f4; // White icons
  }
}

// Logout item with icon on right
.profile-dropdown__item--logout {
  svg {
    fill: #f4f4f4;
  }
}

// ========================================
// OVERLAY FOR CLOSING DROPDOWN
// ========================================

.profile-dropdown__overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
  z-index: 8999;
}
